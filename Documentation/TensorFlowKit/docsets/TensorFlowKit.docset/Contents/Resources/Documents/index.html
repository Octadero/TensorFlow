<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TensorFlowKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="TensorFlowKit  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">TensorFlowKit Docs</a> (86% documented)</p>
        <p class="header-right"><a href="https://github.com/Octadero/TensorFlow"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109209508-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-109209508-2');
    </script>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">TensorFlowKit Reference</a>
        <img id="carat" src="img/carat.png" />
        TensorFlowKit  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/FileWriter.html">FileWriter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Graph.html">Graph</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/OperationsGraph.html">OperationsGraph</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/OperationsNode.html">OperationsNode</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PartialSession.html">PartialSession</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Scope.html">Scope</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Session.html">Session</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SessionOptions.html">SessionOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Status.html">Status</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Summary.html">Summary</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Summary/Channel.html">– Channel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Summary/BadColor.html">– BadColor</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Summary/ImageSize.html">– ImageSize</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Tensor.html">Tensor</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/FileWriterError.html">FileWriterError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/GraphError.html">GraphError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/OperationError.html">OperationError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RecordKind.html">RecordKind</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Shape.html">Shape</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SummaryError.html">SummaryError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TensorError.html">TensorError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TensorFlowKitError.html">TensorFlowKitError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TypeRepresentableError.html">TypeRepresentableError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/TF_DataType.html">TF_DataType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/RecordRepresentable.html">RecordRepresentable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SwiftTypeRepresentable.html">SwiftTypeRepresentable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:13TensorFlowKit5ValueP">Value</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/EventRecord.html">EventRecord</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Footer.html">Footer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Header.html">Header</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/OpSpec.html">OpSpec</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Operation.html">Operation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Output.html">Output</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Record.html">Record</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SavedModel.html">SavedModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SummaryRecord.html">SummaryRecord</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Yupi.html">Yupi</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='tensorflow-swift-high-level-api-a-href-https-twitter-com-intent-tweet-text-tensorflowkit-20is-20swift-20api-20for-20tensorflow-20easiest-20way-20to-20do-20your-20app-20more-20intelligent-url-https-github-com-octadero-tensorflow-via-octadero-hashtags-swift-ml-tensorflow-neuralnetworks-ai-img-src-https-img-shields-io-twitter-url-http-shields-io-svg-style-social-alt-tweet-a' class='heading'>TensorFlow Swift high-level API. <a href="https://twitter.com/intent/tweet?text=TensorFlowKit%20is%20Swift%20API%20for%20tensorflow,%20easiest%20way%20to%20do%20your%20app%20more%20intelligent&url=https://github.com/Octadero/TensorFlow&via=octadero&hashtags=swift,ml,tensorflow,NeuralNetworks,AI"><img src="https://img.shields.io/twitter/url/http/shields.io.svg?style=social" alt="Tweet"></a></h1>

<p align="center">
<a href="https://developer.apple.com/swift/" target="_blank">
<img src="https://img.shields.io/badge/Swift-4.0-orange.svg?style=flat" alt="Swift 4.0">
</a>
<a href="https://developer.apple.com/swift/" target="_blank">
<img src="https://img.shields.io/badge/Platforms-%20Linux%20%26%20OS%20X%20-brightgreen.svg?style=flat" alt="Platforms Linux & OS X">
</a>
<a href="https://github.com/Octadero/TensorFlow/blob/master/LICENSE" target="_blank">
<img src="https://img.shields.io/aur/license/yaourt.svg?style=flat" alt="GPL">
</a>
<a href="http://twitter.com/Octadero" target="_blank">
<img src="https://img.shields.io/badge/Twitter-@Octadero-0084b4.svg?style=flat" alt="Octadero Twitter">
</a>
</p>
<h2 id='structure-of-api' class='heading'>Structure of API</h2>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/TensorFlowProject@2x.png" alt="architecture"></p>

<p>API based on <a href="https://www.tensorflow.org">TensorFlow</a> library.</p>

<ul>
<li>CTensorFlow is C API <a href="https://github.com/apple/swift-package-manager/blob/master/Documentation/Usage.md#require-system-libraries">system module</a>;</li>
<li>CAPI - Swift writen low-level API to C library;</li>
<li>Proto - Swift auto - generated classes for TensorFlow structures and models;</li>
<li>OpPruducer - Swift writen command line tool to produce new <a href="https://www.tensorflow.org/extend/architecture">TensorFlow Operations</a></li>
<li>TensorFlowKit - Swift writen high-level API;</li>
</ul>
<h2 id='summary' class='heading'>Summary</h2>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/tensorboard-1.gif" alt="Summary">
Starting from version 0.0.5 you have posibility to track any metrics using TensorFlowKit.
That is easy way to visualize your model in Swift application.</p>
<h3 id='you-can-visualize-weights-and-biases' class='heading'>You can visualize weights and biases:</h3>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/summary-distribution@2x.png" alt="summary-distribution"></p>
<h3 id='draw-your-graph' class='heading'>Draw your graph:</h3>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/summary-graph@2x.png" alt="summary-graph"></p>
<h3 id='track-changes-in-3d' class='heading'>Track changes in 3D:</h3>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/summary-histogram@2x.png" alt="summary-histogram"></p>
<h3 id='extract-components-as-png-images' class='heading'>Extract components as png images:</h3>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/summary-image@2x.png" alt="summary-image"></p>
<h3 id='watch-on-dynamics-of-changes' class='heading'>Watch on dynamics of changes:</h3>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/summary-scalar@2x.png" alt="summary-scalar"></p>
<h2 id='using-library' class='heading'>Using library.</h2>

<p>First of all you should install tensorflow_c library. You can do that using brew on mac os.
Version 1.4 currantly  available for <a href="https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-darwin-x86_64-1.4.0.tar.gz">mac os</a> and <a href="https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-linux-x86_64-1.4.0.tar.gz">linux</a> on Google cloud, so you can use it:
Also, you can install it from sources, <a href="https://www.octadero.com/2017/08/27/tensorflow-c-environment/">how to install TensorFlow from sources you can find here</a>.</p>
<h3 id='tutorials' class='heading'>Tutorials</h3>

<ul>
<li>There is <a href="https://www.octadero.com/2017/11/14/swift-and-tensorflow/">review of technology stack</a></li>
<li><a href="https://www.octadero.com/2017/11/16/mnist-by-tensorflowkit/">Short tutorial</a>, please review them.</li>
</ul>
<h3 id='xcode' class='heading'>Xcode</h3>

<p><em>Make shure that you read README of submodule CTensorFlow</em></p>

<p>To generate xcode project file you can call:</p>
<pre class="highlight plaintext"><code>swift package -Xlinker -rpath -Xlinker /server/repository/tensorflow/bazel-bin/tensorflow generate-xcodeproj
</code></pre>

<p><em>Where <em>/server/repository/tensorflow/bazel-bin/tensorflow</em> path to your TensorFlow C library <em>/user/local/lib, usualy.</em></em></p>

<p>Also you can use config:</p>
<pre class="highlight plaintext"><code>swift package generate-xcodeproj --xcconfig-overrides TensorFlow.xcconfig
</code></pre>

<ul>
<li>At <code>TensorFlow.xcconfig</code> file set <code>TENSORFLOW_PATH</code> property with correct path.</li>
<li>It is important to set &lsquo;TensorFlow.xcconfig&rsquo; name the same with projectfile.</li>
<li><em>There is <a href="https://bugs.swift.org/browse/SR-6073">issus SR-6073</a></em> with LD_RUNPATH_SEARCH_PATHS property. So, currently you have to set <code>$(inherited)</code> value manualy at your build variable.</li>
</ul>

<p>Build with RPATH setting:</p>
<pre class="highlight plaintext"><code>swift build -Xcxx -std=c++11 -Xlinker -rpath -Xlinker /server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow
swift test -Xcxx -std=c++11 -Xlinker -rpath -Xlinker /server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow
</code></pre>
<h3 id='features' class='heading'>Features</h3>

<p>Swift API provides accae to all available C features in TensorFlow library.</p>

<ul>
<li>Create / read grapht;</li>
<li>Save statistic on file system;</li>
<li>Cunstruct and run session;</li>
<li>Include available operations;</li>
</ul>

<p><img src="https://raw.githubusercontent.com/Octadero/TensorFlow/master/Documentation/resources/grapht@2x.png" alt="graph"></p>
<h3 id='troubleshooting' class='heading'>Troubleshooting</h3>

<ul>
<li>In case app can&rsquo;t load dynamic library on macOS:</li>
</ul>
<pre class="highlight plaintext"><code>otool -L libtensorflow_cc.so
sudo install_name_tool -id /%repository%/tensorflow/bazel-out/darwin_x86_64-opt/bin/tensorflow/libtensorflow_cc.so libtensorflow_cc.so
sudo install_name_tool -id /%repository%/tensorflow/bazel-out/darwin_x86_64-opt/bin/tensorflow/libtensorflow_framework.so libtensorflow_framework.so
sudo install_name_tool -id /%repository%/tensorflow/bazel-out/darwin_x86_64-opt/bin/tensorflow/libtensorflow.so libtensorflow.so
</code></pre>

<ul>
<li>In case if app can&rsquo;t load dynamic library on linux or mac os with error:
<code>
error while loading shared libraries: *libtensorflow_cc.so*: cannot open shared object file: No such file or directory
</code>
Add your library path linux:
<code>
export LD_LIBRARY_PATH=/server/repository/tensorflow/bazel-bin/tensorflow:/usr/local/lib/:$LD_LIBRARY_PATH
</code>
mac os:
<code>
export DYLD_LIBRARY_PATH=/server/repository/tensorflow/bazel-bin/tensorflow/:$DYLD_LIBRARY_PATH
</code></li>
</ul>

<hr>

<p>C++ old related issues.</p>

<ul>
<li>At build phase error:
<code>
warning: error while trying to use pkgConfig flags for CProtobuf: nonWhitelistedFlags(&quot;Non whitelisted flags found: [\&quot;-D_THREAD_SAFE\&quot;, \&quot;-D_THREAD_SAFE\&quot;] in pc file protobuf&quot;)
</code>
Remove <code>-D_THREAD_SAFE</code> keys from file /usr/local/lib/pkgconfig/protobuf.pc</li>
</ul>

<p>Error at build phase:</p>
<pre class="highlight plaintext"><code>#include "tensorflow/core/framework/graph.pb.h"                                                                                                                                         ^                                                                                                                                                                     1 error generated.                                                                                                                                                             error: terminated(1): /usr/bin/swift-build-tool -f /server/repository/TensorFlow/.build/debug.yaml main
</code></pre>

<p>Download dependencies for C++ library at tensorflow repository.</p>
<pre class="highlight plaintext"><code>tensorflow/contrib/makefile/download_dependencies.sh
</code></pre>
<h2 id='developing-and-extending-api' class='heading'>Developing and extending API</h2>
<h3 id='create-new-proto-files' class='heading'>Create new proto files</h3>

<ul>
<li><p>Install swift protobuf generator from <a href="https://github.com/apple/swift-protobuf">Protobuf Swift library</a> </p></li>
<li><p>Execute commands</p></li>
</ul>
<pre class="highlight plaintext"><code>// Create temperory folder
mkdir /tmp/swift
cd %path-to-tensorflow-reposytory%

// Find all proto files and generate swift classes.
find. -name '*.proto' -print -exec protoc --swift_opt=Visibility=Public --swift_out=/tmp/swift {} \;

// All files will be removed after restart.
open /tmp/swift
</code></pre>
<h3 id='list-of-operations' class='heading'>List of operations</h3>

<p>There are a few ways to get a list of the OpDefs for the registered ops:</p>
<pre class="highlight plaintext"><code>TF_GetAllOpList in the C API retrieves all registered OpDef protocol messages. This can be used to write the generator in the client language. This requires that the client language have protocol buffer support in order to interpret the OpDef messages.

The C++ function OpRegistry::Global()-&gt;GetRegisteredOps() returns the same list of all registered OpDefs (defined in [tensorflow/core/framework/op.h]). This can be used to write the generator in C++ (particularly useful for languages that do not have protocol buffer support).

The ASCII-serialized version of that list is periodically checked in to [tensorflow/core/ops/ops.pbtxt] by an automated process.

</code></pre>

<p>OpProducer using C API to extract and prepare all available operation as Swift source code.</p>

          </section>
        </section>
        <section id="footer">
          <p>© 2017 <a class="link" href="https://octadero.com" target="_blank" rel="external">Octadeor</a> under <a class="link" href="https://github.com/Octadero/TensorFlow/blob/master/LICENSE" target="_blank" rel="external">open source license</a>.</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.4</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
